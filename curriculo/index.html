<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Curr√≠culo XML</title>
  <link rel="stylesheet" href="model.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <header>
  <nav>
    <button onclick="Subm()" style="font-size:17px;">√Åreas</button>
    <div class="submenu" id="submenu">
      <a href="dev/">Dev</a>
      <a href="mkt/">Mkt</a>
      <a href="lan/">Rede</a>
    </div>
    <a href="portifolio/">Portif√≥lio</a>
    <a href="timeline/">Time Line</a>
    <a href="curriculo/">Curr√≠culo</a>
  </nav>
  </header>
  
  <div class="curriculo" id="curriculo">
    <header class="topo">
      <div class="foto"><img id="foto" src="" alt="Foto"></div>
      <div class="info-topo">
        <h1 id="nome"></h1>
        <h2 id="cargo"></h2>
      </div>
      <button id="baixarPDF">Baixar PDF</button>
    </header>

    <main class="conteudo">
      <aside class="coluna-esquerda" id="coluna-esquerda"></aside>
      <section class="coluna-direita" id="coluna-direita"></section>
    </main>
  </div>

  <footer> ¬© 2025 - Todos os direitos reservados
  </footer>
  <script>

    async function carregarCurriculo() {
      const resposta = await fetch("info.xml");
      const texto = await resposta.text();
      const xml = new DOMParser().parseFromString(texto, "application/xml");

      document.getElementById("foto").src = xml.querySelector("foto").textContent;
      document.getElementById("nome").textContent = xml.querySelector("nome").textContent;
      document.getElementById("cargo").textContent = xml.querySelector("cargo").textContent;

      const esquerda = document.getElementById("coluna-esquerda");
      const direita = document.getElementById("coluna-direita");

      // Fun√ß√µes auxiliares
      const criarLista = (titulo, itens) => `
        <section class="bloco">
          <h3>${titulo}</h3>
          <ul>${itens.map(i => `<li>${i}</li>`).join("")}</ul>
        </section>`;

      const contato = xml.querySelector("contato");
      esquerda.innerHTML += `
        <section class="bloco">
          <h3>CONTATO</h3>
          <p>üìû ${contato.querySelector("telefone").textContent}</p>
          <p>‚úâÔ∏è ${contato.querySelector("email").textContent}</p>
          <p>üìç ${contato.querySelector("cidade").textContent}</p>
          <p>üîó ${contato.querySelector("linkedin").textContent}</p>
        </section>`;

      const idiomas = [...xml.querySelectorAll("idioma")].map(el => `${el.getAttribute("nome")}: ${el.getAttribute("nivel")}`);
      esquerda.innerHTML += criarLista("IDIOMAS", idiomas);

      const habilidades = [...xml.querySelectorAll("habilidades item")].map(e => e.textContent);
      esquerda.innerHTML += criarLista("HABILIDADES", habilidades);

      const programas = [...xml.querySelectorAll("programa")].map(e => {
        const pontos = "‚óè".repeat(e.getAttribute("nivel")) + "‚óã".repeat(5 - e.getAttribute("nivel"));
        return `${e.getAttribute("nome")} <span>${pontos}</span>`;
      });
      esquerda.innerHTML += `
        <section class="bloco">
          <h3>PROGRAMAS</h3>
          <ul class="nivel">${programas.map(p => `<li>${p}</li>`).join("")}</ul>
        </section>`;

      const interesses = [...xml.querySelectorAll("interesses item")].map(e => e.textContent);
      esquerda.innerHTML += criarLista("INTERESSES", interesses);

      direita.innerHTML += `
        <section class="bloco">
          <h3>PERFIL PROFISSIONAL</h3>
          <p>${xml.querySelector("perfil").textContent}</p>
        </section>`;

      const experiencias = [...xml.querySelectorAll("experiencias cargo")].map(e => `
        <h4>${e.querySelector("titulo").textContent}</h4>
        <p><strong>${e.querySelector("empresa").textContent}</strong> ‚Äì ${e.querySelector("local").textContent} | ${e.querySelector("periodo").textContent}</p>
        <ul>${[...e.querySelectorAll("atividades item")].map(a => `<li>${a.textContent}</li>`).join("")}</ul>
      `).join("");
      direita.innerHTML += `<section class="bloco"><h3>EXPERI√äNCIA PROFISSIONAL</h3>${experiencias}</section>`;

      const formacao = [...xml.querySelectorAll("formacao curso")].map(f => `
        <p><strong>${f.querySelector("titulo").textContent}</strong><br>
        ${f.querySelector("instituicao").textContent}, ${f.querySelector("local").textContent} | ${f.querySelector("periodo").textContent}</p>
      `).join("");
      direita.innerHTML += `<section class="bloco"><h3>FORMA√á√ÉO ACAD√äMICA</h3>${formacao}</section>`;
    }

    carregarCurriculo();

    document.getElementById('baixarPDF').addEventListener('click', async () => {
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF('landscape', 'pt', 'a4'); // modo deitado
      const cv = document.getElementById('curriculo');
      await pdf.html(cv, {
        callback: () => pdf.save("Curriculo-JoaoDaSilva.pdf"),
        margin: [10, 10, 10, 10],
        html2canvas: { scale: 0.6 }
      });
    });

  </script>
</body>
</html>

